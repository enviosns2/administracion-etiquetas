import{r as p,a as P,b as U}from"./vendor-6259821c.js";import{J as w}from"./barcode-eba2668b.js";import{E as O}from"./pdf-5b741ec1.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function d(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=d(n);fetch(n.href,o)}})();var j={exports:{}},h={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R=p,$=Symbol.for("react.element"),L=Symbol.for("react.fragment"),_=Object.prototype.hasOwnProperty,I=R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N={key:!0,ref:!0,__self:!0,__source:!0};function g(r,t,d){var i,n={},o=null,l=null;d!==void 0&&(o=""+d),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(i in t)_.call(t,i)&&!N.hasOwnProperty(i)&&(n[i]=t[i]);if(r&&r.defaultProps)for(i in t=r.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:$,type:r,key:o,ref:l,props:n,_owner:I.current}}h.Fragment=L;h.jsx=g;h.jsxs=g;j.exports=h;var e=j.exports,v,C=P;v=C.createRoot,C.hydrateRoot;const F=({onGenerateLabel:r})=>{const[t,d]=p.useState({sender:"",street:"",postalCode:"",city:"",customCity:"",dimensions:"",customDimensions:"",weight:"",quantity:""}),i="/api/packages",n=a=>{d({...t,[a.target.name]:a.target.value})},o=a=>{const c=Date.now().toString(36),x=a.sender.slice(0,3).toUpperCase(),u=a.city==="otro"?a.customCity.slice(0,3).toUpperCase():a.city.slice(0,3).toUpperCase(),f=Math.random().toString(36).substring(2,6).toUpperCase();return`${x}-${u}-${c}-${f}`},l=()=>{d({sender:"",street:"",postalCode:"",city:"",customCity:"",dimensions:"",customDimensions:"",weight:"",quantity:""})},s=()=>{const{sender:a,street:c,postalCode:x,city:u,customCity:f,dimensions:b,customDimensions:q,weight:S,quantity:E}=t;return a&&c&&x&&S&&E&&(u!=="otro"||f)&&(b!=="otro"||q)},y=async a=>{if(a.preventDefault(),!s()){alert("Por favor, completa todos los campos.");return}const c=o(t),x={paquete_id:c,uniqueCode:c,sender:t.sender,street:t.street,postalCode:t.postalCode,city:t.city==="otro"?t.customCity:t.city,dimensions:t.dimensions==="otro"?t.customDimensions:t.dimensions,weight:t.weight,quantity:t.quantity};r(x);try{const u=await U.post(i,x);console.log("Paquete guardado en la base de datos:",u.data),alert("Paquete guardado con éxito."),l()}catch(u){console.error("Error al guardar el paquete:",u),alert("Hubo un error al intentar guardar el paquete. Por favor, intenta nuevamente.")}};return e.jsxs("form",{onSubmit:y,style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsx("div",{children:e.jsxs("label",{children:["Remitente:",e.jsx("input",{type:"text",name:"sender",value:t.sender,onChange:n,placeholder:"Nombre del remitente",required:!0})]})}),e.jsx("div",{children:e.jsxs("label",{children:["Calle y número:",e.jsx("input",{type:"text",name:"street",value:t.street,onChange:n,placeholder:"Calle y número",required:!0})]})}),e.jsx("div",{children:e.jsxs("label",{children:["Código postal:",e.jsx("input",{type:"text",name:"postalCode",value:t.postalCode,onChange:n,placeholder:"Código postal",required:!0})]})}),e.jsxs("div",{children:[e.jsxs("label",{children:["Ciudad:",e.jsxs("select",{name:"city",value:t.city,onChange:n,required:!0,children:[e.jsx("option",{value:"",children:"Selecciona una opción"}),e.jsx("option",{value:"Jalisco",children:"Jalisco"}),e.jsx("option",{value:"Michoacán",children:"Michoacán"}),e.jsx("option",{value:"Guanajuato",children:"Guanajuato"}),e.jsx("option",{value:"otro",children:"Otro"})]})]}),t.city==="otro"&&e.jsx("input",{type:"text",name:"customCity",value:t.customCity,onChange:n,placeholder:"Especifica la ciudad",style:{marginTop:"5px"},required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{children:["Dimensiones (LxWxH en pulgadas):",e.jsxs("select",{name:"dimensions",value:t.dimensions,onChange:n,required:!0,children:[e.jsx("option",{value:"",children:"Selecciona una opción"}),e.jsx("option",{value:"14x14x14",children:"14x14x14"}),e.jsx("option",{value:"16x16x16",children:"16x16x16"}),e.jsx("option",{value:"18x18x18",children:"18x18x18"}),e.jsx("option",{value:"20x20x20",children:"20x20x20"}),e.jsx("option",{value:"18x18x27",children:"18x18x27"}),e.jsx("option",{value:"22x22x22",children:"22x22x22"}),e.jsx("option",{value:"24x24x24",children:"24x24x24"}),e.jsx("option",{value:"24x24x30",children:"24x24x30"}),e.jsx("option",{value:"27x27x27",children:"27x27x27"}),e.jsx("option",{value:"30x30x30",children:"30x30x30"}),e.jsx("option",{value:"otro",children:"Otro"})]})]}),t.dimensions==="otro"&&e.jsx("input",{type:"text",name:"customDimensions",value:t.customDimensions,onChange:n,placeholder:"Ejemplo: 25x25x25",style:{marginTop:"5px"},required:!0})]}),e.jsx("div",{children:e.jsxs("label",{children:["Peso (lb):",e.jsx("input",{type:"number",name:"weight",value:t.weight,onChange:n,placeholder:"Peso en libras",required:!0})]})}),e.jsx("div",{children:e.jsxs("label",{children:["Cantidad:",e.jsx("input",{type:"number",name:"quantity",value:t.quantity,onChange:n,placeholder:"Cantidad de paquetes",required:!0})]})}),e.jsx("button",{type:"submit",style:{marginTop:"10px"},children:"Generar Etiqueta"})]})},A=({packageData:r})=>{const t=p.useRef(),d=r?G(r):"";p.useEffect(()=>{t.current&&d&&w(t.current,d,{format:"CODE128",lineColor:"#000",width:4,height:80,displayValue:!0})},[d]);const i=()=>{if(!r){alert("No hay datos para generar un PDF.");return}const o=new O({orientation:"portrait",unit:"mm",format:"a4"}),l=o.internal.pageSize.getWidth();let s=30;o.setFont("helvetica","bold"),o.setFontSize(16),o.text("ETIQUETA GENERADA",l/2,s,{align:"center"}),s+=15,o.setFontSize(14),o.text(`REMITE: ${r.sender.toUpperCase()}`,l/2,s,{align:"center"}),s+=10,o.text(`CALLE Y NÚMERO: ${r.street.toUpperCase()}`,l/2,s,{align:"center"}),s+=10,o.text(`CÓDIGO POSTAL: ${r.postalCode.toUpperCase()}`,l/2,s,{align:"center"}),s+=10,o.text(`CIUDAD: ${r.city==="otro"?r.customCity.toUpperCase():r.city.toUpperCase()}`,l/2,s,{align:"center"}),s+=10,o.text(`DIMENSIONES: ${r.dimensions==="otro"?r.customDimensions.toUpperCase():r.dimensions.toUpperCase()}`,l/2,s,{align:"center"}),s+=10,o.text(`PESO: ${r.weight} LB`,l/2,s,{align:"center"}),s+=10,o.text(`CANTIDAD: ${r.quantity}`,l/2,s,{align:"center"}),s+=10,o.text(`CÓDIGO ÚNICO: ${d}`,l/2,s,{align:"center"}),s+=20;const y=t.current.toDataURL("image/png");o.addImage(y,"PNG",l/2-50,s,100,30),s+=50;const a=new Date().toLocaleDateString("es-MX").replace(/\//g,"-"),c=`${r.sender.toUpperCase()}-${a}.pdf`;o.save(c)},n=()=>{window.print()};return r?e.jsxs("div",{children:[e.jsx("h2",{children:"Etiqueta Generada"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Remitente:"})," ",r.sender.toUpperCase()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Calle y número:"})," ",r.street.toUpperCase()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Código postal:"})," ",r.postalCode.toUpperCase()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ciudad:"})," ",r.city==="otro"?r.customCity.toUpperCase():r.city.toUpperCase()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dimensiones:"})," ",r.dimensions==="otro"?r.customDimensions.toUpperCase():r.dimensions.toUpperCase()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Peso:"})," ",r.weight," LB"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Cantidad:"})," ",r.quantity]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Código único:"})," ",d]}),e.jsx("canvas",{ref:t})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("button",{onClick:i,style:{marginRight:"10px"},children:"Descargar como PDF"}),e.jsx("button",{onClick:n,children:"Imprimir Etiqueta"})]})]}):e.jsx("p",{children:"No hay datos para mostrar. Completa el formulario para generar una etiqueta."})};function G(r){const t=Date.now().toString(36),d=r.sender.slice(0,3).toUpperCase(),i=r.city==="otro"?r.customCity.slice(0,3).toUpperCase():r.city.slice(0,3).toUpperCase(),n=Math.random().toString(36).substring(2,6).toUpperCase();return`${d}-${i}-${t}-${n}`}const T=()=>{const[r,t]=p.useState(null),d=i=>{t(i)};return e.jsxs("div",{style:m.container,children:[e.jsx("h1",{style:m.title,children:"Generador de Etiquetas"}),e.jsxs("div",{style:m.content,children:[e.jsxs("div",{style:m.formSection,children:[e.jsx("h2",{children:"Formulario de Captura"}),e.jsx(F,{onGenerateLabel:d})]}),e.jsxs("div",{style:m.labelSection,children:[e.jsx("h2",{children:"Etiqueta"}),e.jsx(A,{packageData:r})]})]})]})},m={container:{fontFamily:"Arial, sans-serif",margin:"0 auto",padding:"20px",maxWidth:"800px",backgroundColor:"#f9f9f9",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},title:{textAlign:"center",color:"#333",marginBottom:"20px"},content:{display:"flex",flexDirection:"row",gap:"20px"},formSection:{flex:1,padding:"10px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},labelSection:{flex:1,padding:"10px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"}};v(document.getElementById("root")).render(e.jsx(p.StrictMode,{children:e.jsx(T,{})}));
